{% import '_includes/forms' as forms %}

<div class="pa-actions">
    <div class="pa-form">
        <h2>Release package</h2>
        <div class="pa-input">
            {{ input('checkbox', 'pa-release-options', 1, {id: 'enableEntries', checked: true}) }}
            <label for="enableEntries">Enable all disabled entries</label>
        </div>
        <div class="pa-input">
            {{ input('checkbox', 'pa-release-options', 1, {id: 'removeFromPackage', checked: true}) }}
            <label for="removeFromPackage">Remove released entries from package</label>
        </div>
        <div class="pa-input">
            {{ input('checkbox', 'pa-release-options', 1, {id: 'validAllOnly', checked: true}) }}
            <label for="validAllOnly">Execute only if all entries pass validation.</label>
        </div>
        <div class="pa-input">
            {{ input('checkbox', 'pa-release-options', 1, {id: 'createBackup', checked: false}) }}
            <label for="createBackup">Create database backup.</label>
        </div>

        <button type="button" onclick="pa_release({{ entry.id }})"
                class="btn submit pa-button">
            Release package
        </button>
        <button type="button" onclick= "Craft.createElementEditor('\\craft\\elements\\Entry', {
                elementId: {{ entry.id }},
                siteId: {{ requestedSite.id }}
                })"
                class="btn pa-button">
            Edit package
        </button>

    </div>


    <div class="pa-form">
        <h2>Attach entries to package</h2>
        {{ forms.elementSelectField({
            id: 'attach-new-drafts',
            name: 'attach-new-drafts',
            selectionLabel: 'Add entries',
            elementType: className(entry),
            sources: sectionConfig.getSources(entry),
            first: true
        }) }}

        <div class="pa-input">
            {{ forms.select({
                name: 'pa-attach-options',
                id: 'attachAs',
                options: [
                    {label : 'Attach as new regular draft'|t('package'), value : 'createRegularDraft'},
                    {label : 'Attach as new provisional draft'|t('package'), value : 'createProvisionalDraft'},
                    {label : 'Attach released element'|t('package'), value : 'attachReleased'},
                ]
            }) }}
        </div>

        <div class="pa-input">
            {{ input('checkbox', 'pa-attach-options', 1, {id: 'ignoreExistingDrafts', checked: false}) }}
            <label for="ignoreExistingDrafts">Ignore existing drafts</label>
        </div>

        <button type="button" onclick="pa_attachNewDrafts({{ entry.id }})"
                class="btn submit pa-button">
            Attach
        </button>
    </div>

    <div class="pa-form">

        <h2>Create new entry for package</h2>

        {{ forms.textField({
            label: 'Title',
            id: 'title',
            name: 'pa-create-options'
        }) }}


        {{ forms.selectField({
            label: 'Section',
            id: 'section',
            name: 'pa-create-options',
            options: sectionConfig.getSectionOptions(entry)
        }) }}

        <button type="button" onclick="pa_attachNewEntry({{ entry.id }})"
                class="btn submit pa-button">
            Create and attach
        </button>
    </div>

</div>

<div id="pa-notice" style="display: none">
    Hier ist Test.
</div>
<div id="pa-error" style="display: none">
    Hier ist Test.
</div>
